query getDigitalCarbonProjectsVintages {
  carbonProjects(first: 1000) {
    carbonCredits(
      where: {
        currentSupply_not: "0"
        isExAnte: false
        poolBalances_: { balance_gte: "0" }
      }
    ) {
      vintage
    }
  }
}

query getTokenById($id: ID!) {
  token(id: $id) {
    symbol
  }
}

query getProjectTokenId($projectID: ID!, $vintage: Int) {
  carbonCredits(
    first: 1
    where: { and: [{ vintage: $vintage }, { project_: { id: $projectID } }] }
  ) {
    tokenId
  }
}

query getDigitalCarbonProjectsCategories {
  carbonProjects(first: 1000) {
    category
  }
}

query getDigitalCarbonProjectsCountries {
  carbonProjects(first: 1000) {
    country
  }
}

query getProjectCredits($projectID: String!, $vintage: Int) {
  carbonProjects(where: { projectID: $projectID }) {
    ...DigitalCarbonProjectFragment
    carbonCredits(where: { vintage: $vintage }) {
      ...CarbonCreditFragment
      poolBalances {
        ...PoolBalancesFragment
      }
    }
  }
}

query findDigitalCarbonProjects(
  $country: [String!]
  $category: [String!]
  $search: String
  $vintage: [Int!]
) {
  carbonProjects(
    first: 1000
    where: {
      and: [
        { category_in: $category }
        { country_in: $country }
        {
          or: [
            { name_contains_nocase: $search }
            { projectID_contains_nocase: $search }
          ]
        }
      ]
    }
  ) {
    ...DigitalCarbonProjectFragment
    carbonCredits(where: { vintage_in: $vintage }) {
      ...CarbonCreditFragment
      poolBalances {
        ...PoolBalancesFragment
        pool {
          ...PoolFragment
        }
      }
    }
  }
}

query getRetirementByHash($hash: Bytes!) {
  retires(where: { hash: $hash }) {
    ...RetireFragment
    credit {
      ...CarbonCreditFragment
    }
  }
}

query allRetirements($account_id: String) {
  retires {
    ...RetireFragment
    credit {
      ...CarbonCreditFragment
    }
  }
}

query getProvenanceRecordsByHash($hash: Bytes!) {
  provenanceRecords(where: { transactionHash: $hash }) {
    ...ProvenanceRecordFragment
    priorRecords(orderBy: createdAt, orderDirection: desc) {
      ...ProvenanceRecordFragment
    }
  }
}
